{"version":3,"sources":["../../src/pages/modal-sabor/modal-sabor.module.ts","../../src/pages/modal-sabor/modal-sabor.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ModalSaborPage } from './modal-sabor';\n\n@NgModule({\n  declarations: [\n    ModalSaborPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ModalSaborPage),\n  ],\n})\nexport class ModalSaborPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal-sabor/modal-sabor.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController, ToastController } from 'ionic-angular';\nimport { ProdutoService } from '../../services/produto.service';\n\n/**\n * Generated class for the ModalSaborPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-modal-sabor',\n  templateUrl: 'modal-sabor.html',\n})\nexport class ModalSaborPage {\n\n  constructor(public navCtrl: NavController,\n    public viewCtrl: ViewController,\n    public toastCtrl: ToastController,\n    public produtoService: ProdutoService,\n    public navParams: NavParams) {\n  }\n\n  sabores;\n  saboresInit = [];\n  maximoSabores = 1;\n  selecionados = [];\n  jaSelecionados = [];\n  blockBotao = false;\n  pesquisa = '';\n  ionViewDidLoad() {\n    let tamanho = this.navParams.get(\"tamanho\");\n    let saborPrincipal = this.navParams.get(\"saborPrincipal\");\n    this.selecionados = this.jaSelecionados = this.navParams.get(\"selecionados\");\n    this.getSabores(tamanho, saborPrincipal);\n  }\n\n  busca() {\n    this.sabores = this.saboresInit;\n    if (this.pesquisa.length > 1) {\n      let v = this.sabores.filter\n      (el => \n        el.produto.produto.nome.toLowerCase().includes(this.pesquisa));\n      this.sabores = v;\n    }\n  }\n\n  getSabores(tamanho, saborPrincipal) {\n    this.produtoService.saboresPorTamanho(tamanho, saborPrincipal)\n      .subscribe(\n        data => {\n          this.validaJaSelecionado(data, (res) => {\n            this.saboresInit = this.sabores = res;\n            console.log(res)\n            if (this.sabores[0]) this.maximoSabores = this.sabores[0].maximo_sabores - 1;\n            this.validaSabores();\n          });\n\n        },\n        err => {\n          console.log(\"erro: \" + err)\n        }\n      )\n  }\n\n  validaSabores() {\n    console.log(\"samores: \" + this.maximoSabores)\n    if (this.maximoSabores < 1) {\n      let toast = this.toastCtrl.create({\n        message: 'TamaÃ±o para 1 sabor, seleccione otro',\n        duration: 3000,\n        position: 'top'\n      });\n\n      toast.present();\n      this.dissmiss();\n    }\n  }\n\n  validaJaSelecionado(data, call) {\n    let temp = [];\n    data.map((s) => {\n      if (this.jaSelecionados.length == 0) {\n        s.selecionado = false;\n\n      } else {\n        this.percorreSelecionados(s, (res) => {\n\n          if (res) s.selecionado = true;\n          else s.selecionado = false;\n        })\n      }\n      temp.push(s)\n    })\n    call(temp);\n  }\n\n\n  percorreSelecionados(sabor, call) {\n    let retorno = false;\n    this.jaSelecionados.map((j) => {\n      if (j.produto_id == sabor.produto_id) retorno = true;\n    })\n    call(retorno);\n  }\n\n  select(sabor) {\n    this.verificaSaborJaIncluido(sabor, (res) => {\n      if (res == false) this.selecionados.push(sabor)\n      else this.deleteSabor(sabor);\n    })\n    if (this.selecionados.length >= this.maximoSabores) {\n\n      let toast = this.toastCtrl.create({\n        message: 'Maximo de sabores adicionados',\n        duration: 3000,\n        position: 'top'\n      });\n\n      toast.present();\n    }\n\n    if (this.selecionados.length > this.maximoSabores) {\n      this.blockBotao = true;\n    } else {\n      this.blockBotao = false;\n    }\n\n  }\n\n  verificaSaborJaIncluido(sabor, call) {\n    let retorno = false;\n    this.selecionados.map((v) => {\n      if (v.id == sabor.id) {\n        retorno = true;\n      }\n    })\n    call(retorno);\n  }\n\n  deleteSabor(sabor) {\n    let temp = [];\n    this.selecionados.map((v) => {\n      if (v.id != sabor.id) temp.push(v)\n    });\n    this.selecionados = temp;\n  }\n\n  dissmiss() {\n\n    this.viewCtrl.dismiss(this.selecionados);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal-sabor/modal-sabor.ts"],"sourceRoot":""}