{"version":3,"sources":["../../src/pages/comandas/comandas.module.ts","../../src/pages/comandas/comandas.ts"],"names":[],"mappings":"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","file":"21.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ComandasPage } from './comandas';\n\n@NgModule({\n  declarations: [\n    ComandasPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ComandasPage),\n  ],\n})\nexport class ComandasPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/comandas/comandas.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, LoadingController, ModalController } from 'ionic-angular';\nimport { ComandaService } from '../../services/comanda.service';\nimport { Vibration } from '@ionic-native/vibration';\n\n/**\n * Generated class for the ComandasPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-comandas',\n  templateUrl: 'comandas.html',\n})\nexport class ComandasPage {\n  comandas: any[];\n  nenhumaComanda = false;\n  impresso = false;\n  erro = false;\n\n  comandasAbertas = 0;\n  total = 0.00;\n  constructor(public navCtrl: NavController,\n    public alertCtrl: AlertController,\n    public loadingCtrl: LoadingController,\n    public modalCtrl: ModalController,\n    private vibration: Vibration,\n    public comandaService: ComandaService,\n    public navParams: NavParams) {\n  }\n\n  ionViewDidLoad() {\n    this.getComandasAbertas()\n  }\n\n\n  getComandasAbertas() {\n    let present = this.presentLoading('Buscando...');\n    present.present();\n    this.comandaService.getOpen()\n      .subscribe(\n        data => {\n          present.dismiss();\n          console.log(data)\n          this.comandas = data;\n          this.comandasAbertas = this.comandas.length;\n          this.somaTotal(data);\n          if (data.length == 0) this.nenhumaComanda = true;\n        },\n        err => {\n          present.dismiss();\n          console.error(err)\n          this.erro = true;\n        }\n      )\n  }\n\n  somaTotal(data) {\n    data.map((v) => {\n      this.total += v.soma\n    })\n  }\n\n  abrir() {\n    this.showPrompt();\n  }\n\n  itens(c) {\n    this.navCtrl.push('ItemComandaPage', { comanda: c });\n  }\n\n  modalNovaComanda() {\n    let profileModal = this.modalCtrl.create('AbrirComandaPage');\n    profileModal.present();\n    profileModal.onDidDismiss(data => {\n      console.log(\"Retornou\");\n      location.reload();\n    });\n  }\n\n  imprimeComanda(comanda) {\n    let loading = this.presentLoading('imprimiendo...');\n    loading.present();\n    console.log(comanda)\n    this.comandaService.imprimeComanda(comanda)\n      .subscribe(\n        data => {\n          loading.dismiss();\n          console.log(data);\n          if (data) {\n            this.vibration.vibrate([100,150,100]);\n            this.impresso = true;\n            setTimeout(() => {\n              this.navCtrl.setRoot('ComandasPage');\n            }, 2000)\n          }\n        }, err => {\n          loading.dismiss();\n          console.error(err)\n          let alert = this.alertCtrl.create({\n            title: 'Error',\n            subTitle: 'Error al imprimir!',\n            buttons: ['Cerrar']\n          });\n          alert.present();\n        }\n      )\n  }\n  showPrompt() {\n    const prompt = this.alertCtrl.create({\n      title: 'Abrir Comanda',\n      message: \"Indique el código de identificación de la comanda\",\n      inputs: [\n        {\n          name: 'cod',\n          placeholder: 'Código',\n          type: 'number'\n        },\n      ],\n      buttons: [\n        {\n          text: 'Cancelar',\n          handler: data => {\n            console.log('Cancel clicked');\n          }\n        },\n        {\n          text: 'Abrir',\n          handler: data => {\n\n          }\n        }\n      ]\n    });\n    prompt.present();\n  }\n\n  presentLoading(mensagem) {\n    let present = this.loadingCtrl.create({\n      content: mensagem,\n      duration: 4000,\n      dismissOnPageChange: true\n    });\n    return present;\n  }\n\n\n  alert(msg) {\n    let alert = this.alertCtrl.create({\n      title: 'Erro',\n      subTitle: msg,\n      buttons: ['Cerrar']\n    });\n    alert.present();\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/comandas/comandas.ts"],"sourceRoot":""}